---
import { cn } from "@/lib/utils";

import Logo from "../logo.astro";

const navItems = [
  { label: "Product", href: "/#product" },
  { label: "Privacy", href: "/#privacy" },
  { label: "Waitlist", href: "/#waitlist" },
  { label: "FAQ", href: "/#faq" },
];
---

<nav class="group top-4 z-50 pt-4 sm:sticky sm:pt-0">
  <div class="mx-auto max-w-6xl px-4">
    <div
      class={cn(
        "flex h-12 items-center justify-between rounded-lg px-0",
        "ease-snappy transition-[background-color,backdrop-filter,padding] duration-300",
        "group-data-[scrolled=true]:sm:bg-neutral-900/80 group-data-[scrolled=true]:sm:backdrop-blur-lg",
        "group-data-[scrolled=true]:sm:px-4 group-data-[scrolled=true]:sm:shadow-lg",
      )}
    >
      <a
        href="/"
        class={cn(
          "flex items-center gap-2",
          "ca-0.5 font-mono text-lg text-neutral-400 uppercase",
          "ease-snappy transition-[text-shadow,color] duration-300",
          "hover:text-neutral-200",
          "-ml-2 rounded-md px-2 ring-neutral-500 outline-none focus-visible:text-neutral-200 focus-visible:ring-1",
          "group-data-[scrolled=true]:sm:ca-0",
        )}
      >
        <div class="size-4.5">
          <Logo
            class="ca-drop-shadow-0.5 group-data-[scrolled=true]:sm:ca-drop-shadow-0"
          />
        </div>
        <span> Orbit </span>
      </a>
      <div class="hidden sm:block">
        <div class="flex items-center space-x-6">
          {
            navItems.map(({ label, href }) => (
              <a
                href={href}
                class={cn(
                  "text-sm text-neutral-400",
                  "ease-snappy transition-colors duration-200",
                  "hover:text-neutral-200",
                  "-ml-2 rounded-md px-2 py-1 ring-neutral-500 outline-none focus-visible:text-neutral-200 focus-visible:ring-1",
                )}
              >
                {label}
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</nav>
<script>
  const nav = document.querySelector("nav");
  const threshold = 60;

  function updateNavState() {
    if (window.scrollY > threshold) {
      nav?.setAttribute("data-scrolled", "true");
    } else {
      nav?.removeAttribute("data-scrolled");
    }
  }

  window.addEventListener("scroll", updateNavState);
  updateNavState(); // Check initial state
</script>
